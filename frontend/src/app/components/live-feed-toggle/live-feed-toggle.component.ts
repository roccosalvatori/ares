import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-live-feed-toggle',
  standalone: true,
  imports: [CommonModule],
  template: `
    <div class="container">
      <input #checkbox id="liveFeedCheckbox" type="checkbox" [checked]="isActive" (change)="onToggle($event)">
      <label class="button" for="liveFeedCheckbox">
        <span class="icon">
          <svg width="394" height="279" viewBox="0 0 394 279" fill="" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M75.6082 0.0215006C73.0089 0.169479 70.5124 1.08772 68.4368 2.65925C25.4016 34.7921 0 85.3186 0 139.02C0 192.736 25.3813 243.352 68.4368 275.483C69.8148 276.521 71.3843 277.278 73.0552 277.708C74.7261 278.139 76.4656 278.236 78.174 277.993C79.8824 277.751 81.5261 277.173 83.0109 276.294C84.4956 275.415 85.7923 274.252 86.8266 272.871C87.8597 271.487 88.6093 269.912 89.0321 268.238C89.4549 266.564 89.5427 264.822 89.2905 263.114C89.0382 261.405 88.4508 259.763 87.5621 258.283C86.6733 256.802 85.5008 255.511 84.1117 254.485C47.6702 227.289 26.2273 184.485 26.2273 139.02C26.2273 93.5677 47.6874 50.8541 84.1117 23.6574C85.5008 22.6309 86.6734 21.3402 87.5621 19.8594C88.4508 18.3785 89.0382 16.7367 89.2905 15.0283C89.5428 13.3198 89.455 11.5784 89.0321 9.90392C88.6093 8.22948 87.8598 6.65506 86.8266 5.27108C85.534 3.53967 83.8336 2.15445 81.8764 1.2386C79.9192 0.322749 77.766 -0.0953457 75.6082 0.0215006ZM317.57 0.0215006C316.715 -0.0275207 315.857 0.00733296 315.009 0.125563C313.284 0.361034 311.624 0.93742 310.124 1.82112C308.625 2.70481 307.316 3.87813 306.275 5.27266C305.242 6.65665 304.492 8.23109 304.069 9.90553C303.647 11.58 303.559 13.3214 303.811 15.0299C304.063 16.7383 304.651 18.3801 305.54 19.861C306.428 21.3418 307.601 22.6325 308.99 23.659C345.414 50.8557 366.874 93.5693 366.874 139.021C366.874 184.486 345.432 227.291 308.99 254.486C307.601 255.513 306.428 256.803 305.54 258.284C304.651 259.765 304.063 261.407 303.811 263.115C303.559 264.824 303.647 266.565 304.069 268.24C304.492 269.914 305.242 271.488 306.275 272.872C307.309 274.257 308.607 275.424 310.094 276.305C311.581 277.186 313.228 277.765 314.939 278.007C316.651 278.25 318.393 278.152 320.067 277.719C321.74 277.286 323.312 276.527 324.69 275.484C367.746 243.353 393.127 192.738 393.127 139.021C393.127 85.32 367.726 34.7936 324.69 2.66069C322.629 1.09862 320.152 0.179447 317.57 0.0215006ZM133.185 47.2932C130.436 47.4354 127.802 48.4389 125.655 50.1614C98.6058 71.7355 82.7798 104.425 82.7798 139.02C82.7798 173.607 98.6164 206.381 125.655 227.955C128.378 230.105 131.842 231.089 135.289 230.691C138.736 230.292 141.885 228.544 144.045 225.83C146.207 223.12 147.208 219.665 146.829 216.219C146.45 212.774 144.721 209.618 142.022 207.444C121.203 190.833 109.007 165.65 109.007 139.02C109.007 112.384 121.195 87.3095 142.022 70.6988C143.373 69.6209 144.498 68.2864 145.332 66.7721C146.166 65.2578 146.692 63.5936 146.88 61.8752C147.068 60.1569 146.914 58.4184 146.428 56.7596C145.941 55.1009 145.131 53.5547 144.045 52.2101C142.967 50.8636 141.634 49.743 140.122 48.9125C138.61 48.082 136.949 47.5579 135.234 47.3702C134.555 47.2903 133.869 47.2661 133.185 47.2932ZM259.942 47.3188C259.259 47.2819 258.574 47.2984 257.893 47.3684C256.178 47.5561 254.517 48.0802 253.005 48.9107C251.493 49.7412 250.16 50.8618 249.082 52.2083C247.996 53.5529 247.186 55.0991 246.699 56.7578C246.213 58.4166 246.059 60.1551 246.247 61.8735C246.435 63.5918 246.961 65.256 247.795 66.7703C248.629 68.2846 249.754 69.6191 251.106 70.697C271.932 87.3077 284.12 112.382 284.12 139.018C284.12 165.648 272.026 190.831 251.208 207.442C248.493 209.602 246.745 212.75 246.346 216.196C245.948 219.642 246.932 223.106 249.082 225.828C250.153 227.187 251.482 228.321 252.993 229.164C254.504 230.007 256.167 230.542 257.886 230.74C259.605 230.937 261.346 230.793 263.009 230.315C264.671 229.836 266.223 229.034 267.574 227.953C294.613 206.379 310.347 173.605 310.347 139.018C310.347 104.423 294.522 71.7337 267.472 50.1596C265.322 48.4463 262.688 47.4537 259.942 47.3188ZM195.501 98.2012C173.546 98.7646 155.699 116.968 155.699 139.045C155.699 161.473 174.119 179.838 196.551 179.838C218.983 179.838 237.352 161.473 237.352 139.045C237.352 116.618 218.983 98.2012 196.551 98.2012C196.199 98.2012 195.849 98.1923 195.501 98.2012Z" fill=""/>
          </svg>
        </span>
      </label>
    </div>
  `,
  styles: [`
    :host {
      display: inline-block;
    }

    .container {
      width: 40px;
      height: 40px;
      position: relative;
    }

    .button {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 2px solid #000000;
      background-color: transparent;
      background-image: linear-gradient(145deg, #171717,rgb(27, 27, 27));
      box-sizing: border-box;
      box-shadow: inset 1.5px 1.5px 0rgb(26, 26, 26), inset -1.5px -1.5px 0px #1c1c1c;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .container input {
      display: none;
    }

    .button::before {
      position: absolute;
      content: "";
      width: 41.4px;
      height: 41.4px;
      border-radius: inherit;
      background-color: transparent;
      background-image: linear-gradient(145deg, #262626, #606060);
      z-index: -1;
      box-shadow: 3px 3px 12px #141414, -3px -3px 12px #525252;
    }

    .button .icon {
      width: 20px;
      height: 20px;
      display: inline-block;
    }

    .button .icon svg {
      height: 100%;
      width: 100%;
      fill: #a5a5a5;
    }

    .container input:checked + .button {
      box-shadow: inset -1.75px -1.75px 0rgb(50, 50, 50), inset 1.75px 1.75px 0 #1c1c1c;
      border: 2px solid rgb(217, 64, 64, 0.281);
      animation: animeBorder 1s linear alternate-reverse infinite;
    }

    .container input:checked + .button .icon svg {
      fill: rgb(217, 64, 64);
      animation: animeFill 1s linear alternate-reverse infinite;
    }

    @keyframes animeFill {
      to {
        fill: rgb(217, 64, 64, 0.642);
      }
    }

    @keyframes animeBorder {
      to {
        border-color: rgb(217, 64, 64);
      }
    }
  `]
})
export class LiveFeedToggleComponent {
  @Input() isActive: boolean = false;
  @Output() toggleChange = new EventEmitter<boolean>();

  onToggle(event: Event): void {
    const target = event.target as HTMLInputElement;
    this.isActive = target.checked;
    this.toggleChange.emit(this.isActive);
  }
}

